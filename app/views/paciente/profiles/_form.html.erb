<%= form_with model: patient_profile, url: paciente_profile_path, method: :patch, class: "space-y-6" do |f| %>
  <% if patient_profile.errors.any? %>
    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4">
      <ul class="list-disc list-inside text-sm text-red-700 dark:text-red-400">
        <% patient_profile.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1">Nombre completo *</label>
      <%= f.text_field :name, class: "w-full rounded-lg border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-sky-500 focus:border-sky-500", required: true %>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1">Tel√©fono</label>
      <%= f.telephone_field :phone, class: "w-full rounded-lg border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-sky-500 focus:border-sky-500" %>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1">Fecha de nacimiento</label>
      <%= f.text_field :date_of_birth,
            value: patient_profile.date_of_birth&.to_s,
            data: { controller: "datepicker", datepicker_mode_value: "past" },
            placeholder: "Selecciona una fecha",
            autocomplete: "off",
            class: "w-full rounded-lg border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-sky-500 focus:border-sky-500" %>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1">Departamento</label>
      <%= f.select :department_id, options_from_collection_for_select(departments, :id, :name, patient_profile.department_id),
          { include_blank: "Selecciona un departamento" },
          { class: "w-full rounded-lg border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-sky-500 focus:border-sky-500" } %>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1">Ciudad</label>
      <%= f.select :city_id, options_from_collection_for_select(cities, :id, :name, patient_profile.city_id),
          { include_blank: "Selecciona una ciudad" },
          { class: "w-full rounded-lg border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-sky-500 focus:border-sky-500" } %>
    </div>
  </div>

  <div class="flex justify-end space-x-3">
    <%= link_to "Cancelar", paciente_profile_path, class: "inline-flex items-center border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-slate-300 hover:bg-gray-50 dark:hover:bg-slate-700 px-5 py-2 rounded-full font-medium transition-all" %>
    <%= f.submit "Guardar cambios", class: "inline-flex items-center bg-sky-500 hover:bg-sky-600 text-white px-5 py-2.5 rounded-full font-medium transition-all shadow-md hover:shadow-lg transform hover:scale-105 cursor-pointer" %>
  </div>
<% end %>
